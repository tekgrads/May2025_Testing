Cookies in Servlets
What is a Cookie?
A cookie is a small piece of data generated by the web server and stored on the client’s browser. It allows the server to remember user-related information across multiple HTTP requests or site visits.

Cookies are stored on the user's browser.

Cookies are automatically sent back to the server with every request.

Real-Time Example
Imagine you add products to your cart in an online store. Even if you refresh or revisit the page, cookies help the server remember your selections.

Example: Passing Data Using Cookies
add.html
html
Copy
Edit
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Insert title here</title>
</head>
<body>
  <h1>LoginForm</h1>
  <form action="add">
    <label>Number 1</label> <input type="text" name="num1" /><br>
    <label>Number 2</label> <input type="text" name="num2" /><br>
    <input type="submit" value="Submit" />
  </form>
</body>
</html>
AddServlet.java
java
Copy
Edit
@WebServlet("/add")
public class AddServlet extends HttpServlet {
  @Override
  public void doGet(HttpServletRequest req, HttpServletResponse res) throws IOException {
    Integer num1 = Integer.parseInt(req.getParameter("num1"));
    Integer num2 = Integer.parseInt(req.getParameter("num2"));
    Integer result = num1 + num2;

    res.addCookie(new Cookie("num1", num1.toString()));
    res.addCookie(new Cookie("num2", num2.toString()));
    res.addCookie(new Cookie("result", result.toString()));

    res.sendRedirect("sq");
  }
}
SqServlet.java
java
Copy
Edit
@WebServlet("/sq")
public class SqServlet extends HttpServlet {
  @Override
  public void doGet(HttpServletRequest req, HttpServletResponse res) throws IOException {
    int num1 = 0, num2 = 0, result = 0;

    for (Cookie c : req.getCookies()) {
      switch (c.getName()) {
        case "num1": num1 = Integer.parseInt(c.getValue()); break;
        case "num2": num2 = Integer.parseInt(c.getValue()); break;
        case "result": result = Integer.parseInt(c.getValue()); break;
      }
    }

    int sq = result * result;
    res.getWriter().print("Square of " + num1 + " and " + num2 + " is: " + sq);
  }
}
Output
csharp
Copy
Edit
Square of 5 and 8 is: 169
Flow
csharp
Copy
Edit
add.html → AddServlet → SqServlet
Form sends numbers to AddServlet.

AddServlet creates cookies and redirects to SqServlet.

SqServlet reads the cookies and calculates the square.

Limitations of Cookies
Limited data capacity (usually 4KB).

Can be deleted or blocked by users.

Security risks if not encrypted (e.g., tampering or theft).

Sent with every HTTP request, which may impact performance.

Session in Servlets
What is a Session?
A session is a server-side mechanism to maintain user data throughout multiple requests. It ensures user-specific data is retained during a user’s interaction with the web application.

Sessions are stored on the server.

Each browser (or incognito window) gets a separate session.

Real-Time Example
When you log in to a website and stay signed in while navigating to other pages, it’s the session keeping you authenticated.

Example: Using Session for Data Sharing
addsession.html
html
Copy
Edit
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Session program</title>
</head>
<body>
  <h1>LoginForm</h1>
  <form action="addSession">
    <label>Number 1</label> <input type="text" name="num1" /><br>
    <label>Number 2</label> <input type="text" name="num2" /><br>
    <input type="submit" value="Submit" />
  </form>
</body>
</html>
AddServlet_Session.java
java
Copy
Edit
@WebServlet("/addSession")
public class AddServlet_Session extends HttpServlet {
  @Override
  public void doGet(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException {
    Integer num1 = Integer.parseInt(req.getParameter("num1"));
    Integer num2 = Integer.parseInt(req.getParameter("num2"));
    Integer result = num1 + num2;

    HttpSession sn = req.getSession();
    sn.setAttribute("num1", num1);
    sn.setAttribute("num2", num2);
    sn.setAttribute("result", result);

    res.sendRedirect("sqSession");
  }
}
SqServletSession.java
java
Copy
Edit
@WebServlet("/sqSession")
public class SqServletSession extends HttpServlet {
  @Override
  public void doGet(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException {
    HttpSession hs = req.getSession();

    Integer num1 = (Integer) hs.getAttribute("num1");
    Integer num2 = (Integer) hs.getAttribute("num2");
    Integer result = (Integer) hs.getAttribute("result");

    Integer sq = result * result;
    res.getWriter().print("Square of " + num1 + " and " + num2 + " is: " + sq);
  }
}
Output
csharp
Copy
Edit
Square of 10 and 10 is: 400
Flow
Copy
Edit
addsession.html → AddServlet_Session → SqServletSession
Data is submitted via form.

Servlet creates a session and stores values.

Redirects to another servlet where session values are retrieved and used.

ServletContext in Servlets
What is ServletContext?
Created once per web application at deployment.

Used to store global-level information.

All servlets and JSPs in the application can access this shared data.

Useful when multiple components need access to common values or configuration.

Example: AddServletContext.java
java
Copy
Edit
@WebServlet(urlPatterns = "/Session")
public class AddServletContext extends HttpServlet {
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        response.setContentType("text/html");
        PrintWriter writer = response.getWriter();

        String userName = request.getParameter("name");
        HttpSession session = request.getSession();
        ServletContext context = request.getServletContext();

        if (userName != null && !userName.isEmpty()) {
            session.setAttribute("savedUserName", userName);
            context.setAttribute("savedUserName", userName);
        }

        writer.println("Request parameter has username as: " + userName + "<br>");
        writer.println("Session parameter has username as: " + session.getAttribute("savedUserName") + "<br>");
        writer.println("Context parameter has username as: " + context.getAttribute("savedUserName") + "<br>");
    }
}
Example URLs & Expected Output
1. New Tab (Same Browser):

pgsql
Copy
Edit
http://localhost:8080/FirstServlet/Session?name=tekgrads
pgsql
Copy
Edit
Request parameter has username as tekgrads  
Session parameter has username as tekgrads  
Context parameter has username as tekgrads  
2. New Tab (No Name Passed):

arduino
Copy
Edit
http://localhost:8080/FirstServlet/Session
pgsql
Copy
Edit
Request parameter has username as null  
Session parameter has username as tekgrads  
Context parameter has username as tekgrads  
3. Different Browser:

arduino
Copy
Edit
http://localhost:8080/FirstServlet/Session
pgsql
Copy
Edit
Request parameter has username as null  
Session parameter has username as null  
Context parameter has username as tekgrads  
ServletConfig in Servlets
What is ServletConfig?
ServletConfig is used to provide initialization parameters to a specific servlet. These parameters are typically defined via annotations or in the web.xml file.

Created once per servlet instance.

Accessible using getServletConfig().

Useful for passing default or configurable data to a servlet.

Example: AddServletConfig.java
java
Copy
Edit
@WebServlet(
    urlPatterns = "/Session",
    initParams = { @WebInitParam(name = "name", value = "Default Username") }
)
public class AddServletConfig extends HttpServlet {
    @Override
    public void init() {
        System.out.println("Servlet config is created");
    }

    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {

        response.setContentType("text/html");
        PrintWriter writer = response.getWriter();

        String userName = request.getParameter("name");
        HttpSession session = request.getSession();
        ServletContext context = request.getServletContext();

        if (userName != null && !userName.isEmpty()) {
            session.setAttribute("savedUserName", userName);
            context.setAttribute("savedUserName", userName);
        }

        writer.println("Request parameter has username as: " + userName + "<br>");
        writer.println("Session parameter has username as: " + session.getAttribute("savedUserName") + "<br>");
        writer.println("Context parameter has username as: " + context.getAttribute("savedUserName") + "<br>");
        writer.println("Config parameter has default username as: " + this.getServletConfig().getInitParameter("name") + "<br>");
    }
}
Expected Output
pgsql
Copy
Edit
Request parameter has username as null  
Session parameter has username as null  
Context parameter has username as null  
Config parameter has default username as Default Username
Console Output:

arduino
Copy
Edit
Servlet config is created
Note: ServletConfig is initialized only once, regardless of how many times the servlet is accessed.

Alternative Way: Configuration Using web.xml
xml
Copy
Edit
<web-app xmlns="http://xmlns.jcp.org/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee
                             http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd"
         version="4.0">

    <display-name>My Web Application</display-name>

    <servlet>
        <servlet-name>ServletOne</servlet-name>
        <servlet-class>com.tekgrads.ServletOne</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>ServletOne</servlet-name>
        <url-pattern>/one</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>LoginServlet</servlet-name>
        <servlet-class>com.tekgrads.LoginServlet</servlet-class>
        <init-param>
            <param-name>username</param-name>
            <param-value>password</param-value>
        </init-param>
    </servlet>

    <servlet-mapping>
        <servlet-name>LoginServlet</servlet-name>
        <url-pattern>/login</url-pattern>
    </servlet-mapping>

</web-app>